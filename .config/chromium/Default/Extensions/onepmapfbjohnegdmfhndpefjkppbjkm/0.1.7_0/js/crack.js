(function(){"use strict";var super_copy_cracked=false;function getI18n(a){return chrome.i18n.getMessage(a)}function styleInject(css,ref){if(ref===void 0)ref={};var insertAt=ref.insertAt;if(!css||typeof document==="undefined"){return}var head=document.head||document.getElementsByTagName("head")[0];var style=document.createElement("style");style.type="text/css";if(insertAt==="top"){if(head.firstChild){head.insertBefore(style,head.firstChild)}else{head.appendChild(style)}}else{head.appendChild(style)}if(style.styleSheet){style.styleSheet.cssText=css}else{style.appendChild(document.createTextNode(css))}}var css_248z="#_copy{align-items:center;background:#4494d5;border-radius:3px;color:#fff;cursor:pointer;display:flex;font-size:13px;height:30px;justify-content:center;position:absolute;width:60px;z-index:1000}#select-tooltip,#sfModal,.modal-backdrop,div[id^=reader-helper]{display:none!important}.modal-open{overflow:auto!important}._sf_adjust_body{padding-right:0!important}.super_copy_btns_div{position:fixed;width:154px;left:10px;top:45%;background:#e7f1ff;border:2px solid #4595d5;font-weight:600;border-radius:2px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;z-index:5000}.super_copy_btns_logo{width:100%;background:#4595d5;text-align:center;font-size:12px;color:#e7f1ff;line-height:30px;height:30px}.super_copy_btns_btn{display:block;width:128px;height:28px;background:#7f5711;border-radius:4px;color:#fff;font-size:12px;border:0;outline:0;margin:8px auto;font-weight:700;cursor:pointer;opacity:.9}.super_copy_btns_btn:hover{opacity:.8}.super_copy_btns_btn:active{opacity:1}";styleInject(css_248z);var handler=function(event){event.stopPropagation();if(event.stopImmediatePropagation){event.stopImmediatePropagation()}event.returnValue=true};var initEvent=function($,websiteConfig){$("body").on("mousedown",function(){return $("#_copy").remove()});if(websiteConfig.initCopyEvent){document.oncopy=function(e){e.preventDefault();e.stopPropagation();if(e.stopImmediatePropagation){e.stopImmediatePropagation()}return true};document.body.addEventListener("copy",handler,{capture:true});$("body").on("copy",function(e){e.preventDefault();e.stopPropagation();if(e.stopImmediatePropagation){e.stopImmediatePropagation()}return true})}};var bindClipboardEvent=function(clipboard){clipboard.on("success",function(e){$("#_copy").html(getI18n("copySuccess"));setTimeout(function(){return $("#_copy").fadeOut(1000)},1000);e.clearSelection()});clipboard.on("error",function(e){$("#_copy").html(getI18n("copyFail"));setTimeout(function(){return $("#_copy").fadeOut(1000)},1000);e.clearSelection()})};var doc_88_path="";var website$l={regexp:/.*doc88\.com\/.+/,init:function($){chrome.runtime.sendMessage({super_type:"getsupercopydoc88path"},function(res){if(res){doc_88_path=res}})},getSelectedText:function(){if(document.getElementById("super_doc88_copy")){document.getElementById("super_doc88_copy").remove()}var script=document.createElement("script");script.type="text/javascript";script.id="super_doc88_copy";document.body.appendChild(script);script.innerHTML=`localStorage.super_copy_doc88=`+doc_88_path;return localStorage.super_copy_doc88}};var website$k={regexp:/.*segmentfault\.com\/.+/,init:function($){$("body").addClass("_sf_adjust_body");$("body").on("click",function(){$("body").css("padding-right",0)})}};var stopJQueryPropagation=function(event){event.stopPropagation();return true};var stopNativePropagation=function(event){return event.stopPropagation()};var utils={createWKBaiduBtn:function(){let section=document.createElement("div");section.className="super_copy_btns_div";section.innerHTML=`<p class="super_copy_btns_logo">SuperCopy超级复制</p><button class="super_copy_btns_btn">展开文档</button>`;document.body.appendChild(section)},setBtnEvent:function(event,args=[],aim_btn="",new_text=null){let btn=document.querySelector(`.${aim_btn}`);btn.onclick=()=>{btn.textContent=new_text;if(args.length){event(...args)}else{event()}};return btn},hideButton:function($){$("body").append('<style id="copy-hide">#_copy{display: none !important;}</style>')},showButton:function($){$("#copy-hide").remove()},removeAttributes:function($,selector,attr){if(attr===void 0){attr=[]}var dom=$(selector);attr.forEach(function(item){return dom.removeAttr(item)})},enableUserSelect:function($,selector,inline){if(inline===void 0){inline=false}var cur=$(selector);if(inline){cur.css("user-select","auto");cur.css("-webkit-user-select","auto")}else{var template="\n                <style>\n                    ".concat(selector,"{\n                        user-select: auto !important;\n                        -webkit-user-select: auto !important;\n                    }\n                </style>\n            ");$("body").append(template.replace(/\s*/," "))}},enableOnSelectStart:function($,selector){$(selector).on("selectstart",stopJQueryPropagation)},enableOnContextMenu:function($,selector){$(selector).on("contextmenu",stopJQueryPropagation)},enableOnCopy:function($,selector){$(selector).on("copy",stopJQueryPropagation)},enableOnKeyDown:function($,selector){$(selector).on("keydown",function(e){if(e.key==="c"&&e.ctrlKey)return stopJQueryPropagation(e)})},enableOnSelectStartByCapture:function(){document.addEventListener("selectstart",stopNativePropagation,true)},enableOnContextMenuByCapture:function(){document.addEventListener("contextmenu",stopNativePropagation,true)},enableOnCopyByCapture:function(){document.addEventListener("copy",stopNativePropagation,true)},enableOnKeyDownByCapture:function(){document.addEventListener("keydown",stopNativePropagation,true)}};var website$j={regexp:/.*wk\.baidu\.com\/view\/.+/,init:function($){utils.hideButton($);$(document).ready(function(){$(".sf-edu-wenku-vw-container").attr("style","");$(".sfa-body").on("selectstart",function(e){e.stopPropagation();return true})});$(window).on("load",function(){$(".sf-edu-wenku-vw-container").attr("style","");$(".sfa-body").on("selectstart",function(e){e.stopPropagation();return true})})}};var restrictCopying=true;var website$f={regexp:/.*docs\.qq\.com\/.+/,config:{initCopyEvent:false},init:function($){$(document).ready(function(){if(document.getElementById("super_qqdoc_copy")){document.getElementById("super_qqdoc_copy").remove()}var script=document.createElement("script");script.type="text/javascript";script.id="super_qqdoc_copy";document.body.appendChild(script);script.innerHTML=`if(pad){if(pad.editor._docEnv.copyable===true){localStorage.super_copy_qq_no_restrict=true}else{pad.editor._docEnv.copyable=true}}else{localStorage.super_copy_qq_no_pad=true}`;if(localStorage.super_copy_qq_no_pad){restrictCopying=false;utils.hideButton($)}else{if(localStorage.super_copy_qq_no_restrict){restrictCopying=false;utils.hideButton($)}}})},getSelectedText:function(){if(!restrictCopying)return"";if(document.getElementById("super_qqdoc_copy_text")){document.getElementById("super_qqdoc_copy_text").remove()}var script=document.createElement("script");script.type="text/javascript";script.id="super_qqdoc_copy_text";document.body.appendChild(script);script.innerHTML=`if(pad){pad.editor._docEnv.copyable=true;pad.editor.clipboardManager.copy();localStorage.super_qqdoc_copy_result=pad.editor.clipboardManager.customClipboard.plain}`;return localStorage.super_qqdoc_copy_result}};var website$e={regexp:new RegExp(".+://boke112.com/post/.+"),init:function($){$("body").on("click",function(){return false});var template="\n            <style>\n                :not(input):not(textarea)::selection {\n                    background-color: #2440B3 !important;\n                    color: #fff !important;\n                }\n\n                :not(input):not(textarea)::-moz-selection {\n                    background-color: #2440B3 !important;\n                    color: #fff !important;\n                }\n            </style>\n        ";$("body").append(template.replace(/\s*/," "))}};var website$7={regexp:new RegExp("qidian"),init:function($){utils.hideButton($);utils.enableUserSelect($,"body");utils.enableOnCopy($,".main-read-container");utils.enableOnContextMenu($,".main-read-container")}};var website$1={regexp:new RegExp("wenku.baidu.com/view/.*"),init:function($){$("head").append("<style>@media print { body{ display:block; } }</style>");var wkurl=location.href+"&seo=google&tag=mhloojimgila1op3mlc4kiidgbbnelip";utils.enableOnKeyDownByCapture();var templateHTML_1=["<div id='copy-template-html'>","<div class='template-container'>","<div class='title-container'>","<div>复制文字</div>","<div id='template-close'>关闭</div>","</div>","<iframe id='copy-template-iframe' src="+wkurl+"></iframe>","<div id='copy-template-loading'>正在加载中</div>","</div>","</div>"].join("");var templateCSS_1=["<style id='copy-template-css'>","body{overflow: hidden !important}","#copy-template-html{position: fixed; top: 0; right: 0; bottom: 0; left: 0; display: flex; align-items: center; justify-content: center;z-index: 999999;}","#copy-template-html > .template-container{height: 80%; width: 80%;border: 1px solid #eee;background: #fff;}",".template-container > .title-container{display: flex; align-items: center; justify-content: space-between;padding: 10px;border-bottom: 1px solid #eee;}","#copy-template-iframe{height: 100%; width: 100%;border: none;}","#copy-template-html #template-close{cursor: pointer;}","#copy-template-loading{left: 0;position: absolute;top: 0;height: 100%;width: 100%;align-items: center;display: flex;justify-content: center;}","</style>"].join("");var show=function(){chrome.runtime.sendMessage({super_type:"checkrestart"},function(resstart){if(resstart){chrome.runtime.sendMessage({super_type:"checkpermission"},function(res){if(res){var closeButtonOrgin=document.querySelector("#copy-template-html #template-close");if(closeButtonOrgin){return}$("body").append(templateHTML_1);$("body").append(templateCSS_1);var closeButton=document.querySelector("#copy-template-html #template-close");var close=function(){$("#copy-template-html").remove();$("#copy-template-css").remove();closeButton.removeEventListener("click",close)};closeButton.addEventListener("click",close);const iframeEle=document.getElementById("copy-template-iframe");const loadingEle=document.getElementById("copy-template-loading");iframeEle.addEventListener("load",function(){loadingEle.style.display="none"})}else{chrome.runtime.sendMessage({super_type:"requestpermission"},function(res){})}})}else{superCopyAlert("提示：SuperCopy授权完成后重启浏览器才可对本页面进行文本复制！")}})};$("head").append("<style>#super-copy-btn-wk{padding: 10px; background: #4594D5;position: fixed; left:0; top: 55%;cursor: pointer;color: #fff;z-index:2147483647;font-weight: bold}</style>");$("body").append("<div id='super-copy-btn-wk'>复制</div>");$("#super-copy-btn-wk").on("click",show)},getSelectedText:function(){if(window.getSelection&&window.getSelection().toString()){return window.getSelection().toString()}var result=/查看全部包含“([\s\S]*?)”的文档/.exec(document.body.innerHTML);if(result)return result[1];return""}};var websites=[website$l,website$k,website$j,website$f,website$e,website$7,website$1];var siteGetSelectedText=null;var initWebsite=function($){var websiteConfig={initCopyEvent:true};var mather=function(regex,website){if(regex.test(window.location.href)){website.init($);if(website.config)websiteConfig=Object.assign(websiteConfig,website.config);if(website.getSelectedText)siteGetSelectedText=website.getSelectedText;return true}return false};websites.some(function(website){return mather(website.regexp,website)});return websiteConfig};var getSelectedText=function(){if(siteGetSelectedText)return siteGetSelectedText();if(window.getSelection)return window.getSelection().toString();if(document.getSelection)return document.getSelection().toString();if(document.selection)return document.selection.createRange().text;return""};function validCrack(){var validCopyUrl=false;var father=function(regex){if(regex.test(window.location.href)){validCopyUrl=true}};websites.some(function(website){father(website.regexp)});return validCopyUrl}var supercopycount=0;function startCrack(){if(!super_copy_cracked){var $=window.$;var ClipboardJS=window.ClipboardJS;var websiteConfig=initWebsite($);initEvent($,websiteConfig);document.body.addEventListener("mouseup",function(e){supercopycount=supercopycount+1;console.log("isSuperCopy",isSuperCopy);if(supercopycount>10&&isSuperCopy==false){superCopyAlert("",function(){chrome.runtime.sendMessage({super_type:"opentab"},function(res){})})}var copyText=getSelectedText();if(copyText)console.log(copyText);else return"";$("#_copy").remove();var template='\n            <div id="_copy"\n            style="left:'.concat(e.pageX+30,"px;top:").concat(e.pageY,'px;"\n            data-clipboard-text="').concat(copyText.replace(/"/g,"&quot;"),'">'+getI18n("copy")+"</div>\n        ");$("body").append(template);$("#_copy").on("mousedown",function(event){return event.stopPropagation()});$("#_copy").on("mouseup",function(event){return event.stopPropagation()});var clipboard=new ClipboardJS("#_copy");bindClipboardEvent(clipboard)});super_copy_cracked=true}}function superCopyAlert(data,callback){if(!data){data="\u60a8\u4f7f\u7528\u7684\u8d85\u7ea7\u590d\u5236\u6269\u5c55\u53ef\u80fd\u88ab\u7be1\u6539\uff0c\u8bf7\u91cd\u65b0\u4e0b\u8f7d\u6700\u65b0\u7248\u8d85\u7ea7\u590d\u5236\u6269\u5c55\uff0c\u4e0b\u8f7d\u5730\u5740\uff1a\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0077\u0077\u0077\u002e\u0063\u0072\u0078\u0066\u0075\u006e\u002e\u0063\u006f\u006d\u002f\u0064\u0065\u0074\u0061\u0069\u006c\u003f\u0069\u0064\u003d\u006f\u006e\u0065\u0070\u006d\u0061\u0070\u0066\u0062\u006a\u006f\u0068\u006e\u0065\u0067\u0064\u006d\u0066\u0068\u006e\u0064\u0070\u0065\u0066\u006a\u006b\u0070\u0070\u0062\u006a\u006b\u006d"}var alert_bg=document.createElement("div");var alert_box=document.createElement("div");var alert_text=document.createElement("div");var alert_btn=document.createElement("div");var textNode=document.createTextNode(data?data:"");if(!data){var btnText=document.createTextNode("确 定")}else{var btnText=document.createTextNode("不再提示")}css(alert_bg,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","background-color":"rgba(0, 0, 0, 0.1)","z-index":"999999999"});css(alert_box,{width:"400px","max-width":"90%","font-size":"16px","text-align":"center","background-color":"#fff","border-radius":"5px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)","box-shadow":"0 8px 16px 0 rgb(0 0 0 / 20%)",border:"1px solid rgba(0,0,0,.2)"});css(alert_text,{padding:"10px 15px","border-bottom":"1px solid #ddd"});css(alert_btn,{padding:"10px 0",color:"#007aff","font-weight":"600",cursor:"pointer"});alert_text.appendChild(textNode);alert_btn.appendChild(btnText);alert_box.appendChild(alert_text);alert_box.appendChild(alert_btn);alert_bg.appendChild(alert_box);document.getElementsByTagName("body")[0].appendChild(alert_bg);alert_btn.onclick=function(){alert_bg.parentNode.removeChild(alert_bg);if(typeof callback==="function"){callback()}}}var cchars=["o","n","e","p","m","a","p","f","b","j","o","h","n","e","g","d","m","f","h","n","d","p","e","f","j","k","p","p","b","j","k","m"];var echars=["n","h","i","h","e","e","k","d","c","n","m","f","b","a","p","k","m","p","b","h","m","p","l","f","d","d","e","n","h","j","i","c"];var tchars=["b","a","j","p","h","a","p","m","b","c","p","d","m","g","e","e","c","a","l","i","l","n","b","a","a","j","o","e","n","c","l","n"];function css(targetObj,cssObj){var str=targetObj.getAttribute("style")?targetObj.getAttribute("style"):"";for(var i in cssObj){str+=i+":"+cssObj[i]+";"}targetObj.style.cssText=str}var en=function(input){var output="";if(!input){return output}var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=utf16to8(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+b64.charAt(enc1)+b64.charAt(enc2)+b64.charAt(enc3)+b64.charAt(enc4)}return output};var utf16to8=function(str){var out,i,len,c;out="";len=str.length;for(i=0;i<len;i++){c=str.charCodeAt(i);if(c>=0x0001&&c<=0x007f){out+=str.charAt(i)}else if(c>0x07ff){out+=String.fromCharCode(0xe0|((c>>12)&0x0f));out+=String.fromCharCode(0x80|((c>>6)&0x3f));out+=String.fromCharCode(0x80|((c>>0)&0x3f))}else{out+=String.fromCharCode(0xc0|((c>>6)&0x1f));out+=String.fromCharCode(0x80|((c>>0)&0x3f))}}return out};var isSuperCopy=true;function checkextid(){if(chrome.runtime.id!=cchars.join("")&&chrome.runtime.id!=echars.join("")&&chrome.runtime.id!=tchars.join("")){isSuperCopy=false}else{console.log("isSuperCopy check true ")}}function checkid(){chrome.runtime.sendMessage({super_type:"getsupercopyinstalldate"},function(res){if(res){var nowtime=new Date().getTime();if((nowtime-res)/(1*24*60*60*1000)>7){checkextid()}}else{checkextid()}})}(function(){console.log("super_copy_cracked:"+super_copy_cracked);chrome.runtime.onMessage.addListener(function(request,sender,sendResponse){const message=request.msg;switch(message){case"super_crack":if(validCrack()){checkid();startCrack();sendResponse({super_result:true})}else{sendResponse({super_result:false})}break;case"doc_88_path":console.log("doc_88_path")}})})()})();